<!DOCTYPE html>
<html>
<head>
    <title>FinePulse Admin - Tracking Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
    <h2>Shipment Tracking Management</h2>
    
    <!-- Add New Shipment -->
    <div class="card mb-4">
        <div class="card-header">Add New Shipment</div>
        <div class="card-body">
            <form id="addShipmentForm">
                <div class="row">
                    <div class="col-md-6">
                        <input type="text" class="form-control mb-3" name="tracking_id" placeholder="Tracking ID" required>
                        <input type="text" class="form-control mb-3" name="customer_name" placeholder="Customer Name" required>
                        <input type="text" class="form-control mb-3" name="origin" placeholder="Origin" required>
                    </div>
                    <div class="col-md-6">
                        <input type="text" class="form-control mb-3" name="destination" placeholder="Destination" required>
                        <select class="form-control mb-3" name="status" required>
                            <option value="Processing">Processing</option>
                            <option value="In Transit">In Transit</option>
                            <option value="Customs Clearance">Customs Clearance</option>
                            <option value="Out for Delivery">Out for Delivery</option>
                            <option value="Delivered">Delivered</option>
                        </select>
                        <input type="date" class="form-control mb-3" name="estimated_delivery" required>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Add Shipment</button>
            </form>
        </div>
    </div>
    
    <!-- Update Tracking -->
    <div class="card">
        <div class="card-header">Update Tracking Event</div>
        <div class="card-body">
            <form id="updateTrackingForm">
                <div class="row">
                    <div class="col-md-3">
                        <input type="text" class="form-control mb-3" name="tracking_id" placeholder="Tracking ID" required>
                    </div>
                    <div class="col-md-3">
                        <input type="text" class="form-control mb-3" name="location" placeholder="Location" required>
                    </div>
                    <div class="col-md-3">
                        <input type="text" class="form-control mb-3" name="status" placeholder="Status" required>
                    </div>
                    <div class="col-md-3">
                        <input type="datetime-local" class="form-control mb-3" name="event_date" required>
                    </div>
                </div>
                <textarea class="form-control mb-3" name="description" placeholder="Description" rows="2"></textarea>
                <button type="submit" class="btn btn-success">Add Tracking Event</button>
            </form>
        </div>
    </div>
</div>

<script>
document.getElementById('addShipmentForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const formData = new FormData(this);
    
    fetch('api/admin.php?action=add_shipment', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        alert(data.success ? 'Shipment added successfully!' : 'Error: ' + data.error);
        if (data.success) this.reset();
    });
});

document.getElementById('updateTrackingForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const formData = new FormData(this);
    
    fetch('api/admin.php?action=add_event', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        alert(data.success ? 'Tracking event added successfully!' : 'Error: ' + data.error);
        if (data.success) this.reset();
    });
});
</script>
</body>
</html>